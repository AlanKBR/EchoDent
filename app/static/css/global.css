/*
	EchoDent UI — Fundação de Design Tokens e Estilos Globais
	Objetivo: Base clean, moderna e profissional (SaaS) com suporte a tema claro/escuro.
	Observação: offline-first; sem imports externos de fontes.
*/

/* ===============================
	 Parte 1 — Design Tokens (Light)
	 =============================== */
:root {
	/* Paleta Primária — Valores dinâmicos injetados via base.html */
	/* --primary-color e --secondary-color vêm do theme_service */
	--color-primary-light: color-mix(in oklab, var(--primary-color, #10b981) 70%, white);
	--color-primary-main:  var(--primary-color, #10b981); /* fallback: mint/green 500 */
	--color-primary-dark:  color-mix(in oklab, var(--primary-color, #10b981) 85%, black);

	/* Superfícies (Light) */
	--color-background:    #fafafa; /* fundo da página */
	--color-surface-card:  #ffffff; /* cartões/superfícies elevadas */

	/* Texto */
	--color-text-primary:   #0f172a; /* slate-900 */
	--color-text-secondary: #475569; /* slate-600 */
	--color-text-on-primary:#ffffff; /* texto sobre botão primário */

	/* Bordas */
	--color-border:        #e5e7eb; /* gray-200 */
	--color-border-focus:  #99f6e4; /* teal-200 (realce de foco) */

	/* Tipografia (Offline-First) */
	--font-family-system: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans", "Liberation Sans", sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;

	/* Geometria e Movimento */
	--border-radius-medium: 10px;
	--shadow-medium: 0 6px 20px rgba(2, 6, 23, 0.08); /* sombra suave profissional */
	--transition-short: 180ms ease;

		/* Espaçamento (escala) */
		--space-1: 0.25rem; /* 4px */
		--space-2: 0.5rem;  /* 8px */
		--space-3: 0.75rem; /* 12px */
		--space-4: 1rem;    /* 16px */
		--space-5: 1.25rem; /* 20px */
		--space-6: 1.5rem;  /* 24px */

		/* Cores de Feedback */
		--color-warning-bg:     #fff7ed; /* amber-50 */
		--color-warning-border: #fed7aa; /* orange-200 */
		--color-warning-text:   #7c2d12; /* amber-900 */

		/* Cores de Erro (Danger) */
		--color-danger-bg:     #fef2f2; /* red-50 */
		--color-danger-border: #fecaca; /* red-200 */
		--color-danger-text:   #7f1d1d; /* red-900 */

		/* Cores de Informação (Info) */
		--color-info-bg:     #eff6ff; /* blue-50 */
		--color-info-border: #bfdbfe; /* blue-200 */
		--color-info-text:   #1e3a8a; /* blue-900 */

		/* Z-Index Tokens (consistentes e documentados) */
		--z-base: 0;
		--z-sticky: 10;           /* headers fixos, etc */
		--z-dropdown: 1000;       /* dropdowns, overlays leves, modal-overlay atual */
		--z-flyover: 3000;        /* menus flutuantes (ex.: context/settings) */
		--z-popover: 4000;        /* popovers de edição (ex.: criar evento) */
		--z-overlay: 10000;       /* sobreposições críticas (ex.: detalhes do evento) */
		--z-ultimate: 99999;      /* lib/vendor (ex.: flatpickr) */
}

/* ================================
	 Parte 2 — Design Tokens (Dark)
	 ================================ */
[data-theme-mode="dark"] {
	/* Superfícies (Dark) */
	--color-background:   #0b1220; /* navy/black suave */
	--color-surface-card: #0f172a; /* slate-900 */

	/* Texto (Dark) */
	--color-text-primary:   #e5e7eb; /* gray-200 */
	--color-text-secondary: #94a3b8; /* slate-400 */

	/* Bordas (Dark) */
	--color-border:       #1f2937; /* gray-800 */
	--color-border-focus: #0ea5e9; /* azul sutil para foco no dark */

		/* Feedback (Dark) */
		--color-warning-bg:     #2b1c0f; /* escuro quente */
		--color-warning-border: #b45309; /* amber-700 */
		--color-warning-text:   #fed7aa; /* orange-200 */

		/* Erro (Danger - Dark) */
		--color-danger-bg:     #2a1212; /* escuro avermelhado */
		--color-danger-border: #ef4444; /* red-500 */
		--color-danger-text:   #fecaca; /* red-200 */

		/* Informação (Info - Dark) */
		--color-info-bg:     #0b2540; /* azul profundo */
		--color-info-border: #3b82f6; /* blue-500 */
		--color-info-text:   #bfdbfe; /* blue-200 */
}

/* =====================================
	 Parte 3 — Reset e Estilos de Fundação
	 ===================================== */
*, *::before, *::after {
	box-sizing: border-box;
}

html, body {
	margin: 0;
	padding: 0;
}

body {
	font-family: var(--font-family-system);
	background-color: var(--color-background);
	color: var(--color-text-primary);
	line-height: 1.5;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	transition: background-color var(--transition-short),
							color var(--transition-short);
}

/* Tipografia básica */
h1, h2, h3, h4, h5, h6 {
	margin: 0 0 0.5rem;
	color: var(--color-text-primary);
	line-height: 1.2;
}

p {
	margin: 0 0 1rem;
	color: var(--color-text-secondary);
}

a {
	color: var(--color-primary-dark);
	text-decoration: none;
	transition: color var(--transition-short);
}

a:hover {
	color: var(--color-primary-main);
}

/* Superfície padrão de cartões/contêineres */
.card, .surface {
	background-color: var(--color-surface-card);
	color: var(--color-text-primary);
	border: 1px solid var(--color-border);
	border-radius: var(--border-radius-medium);
	box-shadow: var(--shadow-medium);
}

/* Estrutura de cartões */
.card-header {
	padding: var(--space-3) var(--space-4);
	border-bottom: 1px solid var(--color-border);
	font-weight: 600;
}

.card-body {
	padding: var(--space-4);
}

/* Formulários */
input, textarea, select {
	font-family: inherit;
	color: var(--color-text-primary);
	background-color: var(--color-surface-card);
	border: 1px solid var(--color-border);
	border-radius: var(--border-radius-medium);
	padding: 0.563rem 0.75rem; /* 9px 12px aprox. */
	transition: border-color var(--transition-short),
							box-shadow var(--transition-short),
							background-color var(--transition-short),
							color var(--transition-short);
}

input::placeholder, textarea::placeholder {
	color: var(--color-text-secondary);
}

input:focus, textarea:focus, select:focus {
	outline: none;
	border-color: var(--color-border-focus);
	box-shadow: 0 0 0 3px color-mix(in oklab, var(--color-border-focus) 35%, transparent);
}

/* Botão Primário */
.btn {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: 0.5rem;
	height: 40px;
	padding: 0 16px;
	font-weight: 600;
	border: 1px solid transparent;
	border-radius: var(--border-radius-medium);
	cursor: pointer;
	transition: background-color var(--transition-short),
							color var(--transition-short),
							transform var(--transition-short),
							box-shadow var(--transition-short),
							border-color var(--transition-short);
}

.btn-primary {
	color: var(--color-text-on-primary);
	background-color: var(--color-primary-main);
	box-shadow: var(--shadow-medium);
}

.btn-primary:hover {
	background-color: var(--color-primary-dark);
}

.btn-primary:active {
	transform: translateY(1px);
}

.btn-primary:focus-visible {
	outline: none;
	box-shadow: 0 0 0 3px color-mix(in oklab, var(--color-border-focus) 45%, transparent), var(--shadow-medium);
}

/* Botão Secundário (outline/ghost) */
.btn-secondary {
	color: var(--color-text-secondary);
	background-color: transparent;
	border-color: var(--color-border);
}

.btn-secondary:hover {
	color: var(--color-text-primary);
	border-color: var(--color-primary-main);
}

.btn-secondary:focus-visible {
	outline: none;
	box-shadow: 0 0 0 3px color-mix(in oklab, var(--color-border-focus) 35%, transparent), var(--shadow-medium);
}

/* Layout container e header principal */
.layout-container {
	width: 100%;
	max-width: 1100px;
	margin: 0 auto;
	padding: var(--space-4);
}

/* Agenda needs more horizontal room: allow full-width container on that page */
.page-agenda .layout-container { max-width: none; }

.main-header {
	position: sticky;
	top: 0;
	z-index: var(--z-sticky);
	background-color: var(--color-surface-card);
	border-bottom: 1px solid var(--color-border);
	box-shadow: var(--shadow-medium);
}

.main-header .inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  height: 56px;
}

.brand {
  font-weight: 700;
  flex-shrink: 0;
}

/* PRIORIDADE 3: Corrigir Header Global - Busca Comprimida (< 480px) */
@media (max-width: 479px) {
  .main-header .inner {
    flex-direction: column !important;
    align-items: stretch !important; /* esticar filhos horizontalmente */
    height: auto !important; /* permitir crescimento vertical */
    padding: var(--space-2, 0.5rem) 0 !important;
    gap: var(--space-2, 0.5rem) !important;
  }

  .global-search-wrapper {
    max-width: none !important; /* usar toda a largura disponível */
    margin: 0 var(--space-3, 0.75rem) !important;
  }

  .brand {
    text-align: center;
    padding: 0 var(--space-3, 0.75rem);
  }
}

/* Tabelas básicas */
table {
	width: 100%;
	border-collapse: collapse;
	background-color: var(--color-surface-card);
	border: 1px solid var(--color-border);
	border-radius: var(--border-radius-medium);
	overflow: hidden;
}

th, td {
	padding: var(--space-3);
	text-align: left;
	border-top: 1px solid var(--color-border);
}

thead th {
	background-color: color-mix(in oklab, var(--color-border) 40%, var(--color-surface-card));
	border-top: none;
}

/* Alertas baseados em tokens */
.alert {
	padding: var(--space-3) var(--space-4);
	border-radius: var(--border-radius-medium);
	border: 1px solid var(--color-border);
}

.alert-warning {
	background-color: var(--color-warning-bg);
	border-color: var(--color-warning-border);
	color: var(--color-warning-text);
	font-weight: 600;
}

/* Alerta de erro (danger) */
.alert-danger {
	background-color: var(--color-danger-bg);
	border-color: var(--color-danger-border);
	color: var(--color-danger-text);
	font-weight: 700;
}

/* Alerta de sucesso (success) */
.alert-success {
	background-color: var(--color-primary-light);
	border-color: var(--color-primary-main);
	color: var(--color-primary-main);
	font-weight: 700;
}

/* Alerta informativo (info) */
.alert-info {
	background-color: var(--color-info-bg);
	border-color: var(--color-info-border);
	color: var(--color-info-text);
	font-weight: 600;
}

/* Modal de Erro (Overlay + Card) */
.modal-overlay {
	position: fixed;
	inset: 0;
	z-index: var(--z-dropdown);
	background: color-mix(in oklab, #000 55%, transparent);
	display: none; /* ativar com .is-visible */
	align-items: center;
	justify-content: center;
}

.modal-overlay.is-visible { display: flex; }

.modal-card {
	background: var(--color-surface-card);
	color: var(--color-text-primary);
	border: 1px solid var(--color-border);
	border-radius: var(--border-radius-medium);
	box-shadow: var(--shadow-medium);
	max-width: 560px;
	width: min(92vw, 560px);
	padding: var(--space-4);
}

.modal-card .modal-title {
	margin: 0 0 var(--space-3);
	font-weight: 700;
}

.modal-card .modal-actions {
	margin-top: var(--space-4);
	display: flex;
	justify-content: flex-end;
	gap: var(--space-2);
}

/* Modal body scroll area for long error logs */
#error-modal-text, .modal-body-scroll {
	max-height: 300px;
	overflow-y: auto;
	white-space: pre-wrap; /* wrap long lines */
}

/* Utilitários */
.text-right { text-align: right; }
.mt-2 { margin-top: var(--space-2); }
.mb-2 { margin-bottom: var(--space-2); }
.ml-2 { margin-left: var(--space-2); }
.ml-4 { margin-left: var(--space-4); }
.flex { display: flex; }
.flex-wrap { flex-wrap: wrap; }
.gap-2 { gap: var(--space-2); }
.flex-1 { flex: 1 1 auto; }
.max-w-480 { max-width: 480px; }
.w-100 { width: 100%; }

/* Generic visibility helper used across components */
.hidden { display: none !important; }

/* Inline-style replacements for templates (utilities) */
.text-wrap-break { word-break: break-all; }
.overflow-y-auto { overflow-y: auto; }
.max-h-300px { max-height: 300px; }
.max-h-400px { max-height: 400px; }

/* Respeito a acessibilidade: menos movimento quando preferido pelo usuário */
@media (prefers-reduced-motion: reduce) {
	*, *::before, *::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}
}

/* ================================
	 Reusable card layout patterns
	 ================================ */
/* Split card with an aside and main content. Control aside width via --card-sidebar. */
.card-split {
	display: grid;
	grid-template-columns: var(--card-sidebar, 280px) 1fr;
	gap: var(--space-4);
}
.card-split .card-aside {
	min-width: 220px;
	max-width: 360px;
}
.card-split .card-main { min-width: 0; }
@media (max-width: 1024px) {
	.card-split { grid-template-columns: 1fr; }
	.card-split .card-aside { min-width: 0; max-width: none; }
}

/* Utilitários mínimos úteis */
.pre-wrap { white-space: pre-wrap; }
.mt-3 { margin-top: 1rem; }
.mb-3 { margin-bottom: 1rem; }
.mx-auto { margin-left: auto; margin-right: auto; }

/* Impressão: neutralizar visual de preview para PDF */
@media print {
	.print-preview-wrapper.card {
		border: none !important;
		box-shadow: none !important;
		padding: 0 !important;
		background: transparent !important;
	}
	.print-preview-wrapper .card-body {
		padding: 0 !important;
	}
}

/* ================================
	Parte 4 — Sidebar (Desktop Only)
	=============================== */
:root {
	--sidebar-collapsed-width: 68px;
	--sidebar-expanded-width: 240px;
}

/* Estrutura base do layout com sidebar: apenas no desktop */
@media (min-width: 1024px) {
	body {
		display: flex;
	}
	.main-content-wrapper {
		flex: 1;
		min-height: 100vh;
		display: flex;
		flex-direction: column;
	}

	.sidebar {
		width: var(--sidebar-collapsed-width);
		background-color: var(--color-surface-card);
		border-right: 1px solid var(--color-border);
		box-shadow: var(--shadow-medium);
		display: flex;
		flex-direction: column;
		align-items: stretch;
		position: sticky;
		top: 0;
		align-self: flex-start;
		height: 100vh;
		padding: var(--space-4) var(--space-2);
		transition: width var(--transition-short),
						padding var(--transition-short);
	}

	body.sidebar-expanded .sidebar {
		width: var(--sidebar-expanded-width);
		padding-right: var(--space-4);
	}

	.sidebar-header {
		display: flex;
		align-items: center;
		justify-content: space-between; /* logo à esquerda, ações à direita */
		height: 48px;
		padding: 0 var(--space-2);
		margin-bottom: var(--space-4);
	}

	.sidebar-header .header-actions {
		display: flex;
		align-items: center;
		gap: var(--space-2);
	}
	/* Garantir que o botão de tema no header apareça no expandido */
	body.sidebar-expanded .sidebar .header-actions .header-theme-toggle {
		display: inline-flex;
	}

	/* No estado recolhido, esconda a marca para dar espaço ao toggle */
	body:not(.sidebar-expanded) .sidebar .brand {
		display: none;
	}
	body:not(.sidebar-expanded) .sidebar .header-actions .header-theme-toggle {
		display: none;
	}

	.sidebar-nav {
		display: flex;
		flex-direction: column;
		gap: var(--space-1);
	}

	.sidebar-link {
		display: flex;
		align-items: center;
		gap: var(--space-3);
		padding: 10px 12px;
		border-radius: var(--border-radius-medium);
		color: var(--color-text-secondary);
		transition: background-color var(--transition-short), color var(--transition-short);
	}

	.sidebar-link:hover {
		background-color: color-mix(in oklab, var(--color-border) 40%, var(--color-surface-card));
		color: var(--color-text-primary);
	}

	.sidebar .icon { flex: 0 0 auto; }
	.sidebar .link-text {
		opacity: 0;
		white-space: nowrap;
		max-width: 0;
		overflow: hidden;
		transition: opacity var(--transition-short), max-width var(--transition-short);
	}
	body.sidebar-expanded .sidebar .link-text {
		opacity: 1;
		max-width: 320px;
	}

	.sidebar-footer {
		display: flex;
		align-items: center;
		gap: var(--space-2);
		margin-top: auto; /* fixa o footer na base da coluna */
		padding: 0; /* sem padding extra para alinhar com nav */
	}

	/* Área principal entre header e footer para comportar nav e widgets dinâmicos */
	.sidebar .sidebar-main {
		flex: 1 1 auto;
		min-height: 0; /* permite overflow interno */
		overflow: hidden;
		display: flex;
		flex-direction: column;
	}
	.sidebar .sidebar-main .sidebar-nav { flex: 1 1 auto; overflow: auto; }

	/* Slots de widgets da Agenda na sidebar (visíveis apenas no expandido) */
	.sidebar .sidebar-widget-slot {
		display: none;
		margin: var(--space-3) var(--space-2);
		padding: var(--space-2);
		border: 1px solid var(--color-border);
		border-radius: var(--border-radius-medium);
		background: var(--color-surface-card);
		box-shadow: var(--shadow-medium);
	}
	body.sidebar-expanded .sidebar .sidebar-widget-slot { display: block; }

	/* Sticky positioning for better widget placement */
	.sidebar #agendaSidebarTop { position: sticky; top: var(--space-2); z-index: 2; }
	.sidebar #agendaSidebarBottom { position: sticky; bottom: var(--space-2); z-index: 2; }

	/* Mini calendar tweaks inside the sidebar */
	/* Removed calendar widgets from global sidebar; all agenda widgets now in-card */

	/* Estado expandido: perfil + logout em uma única linha */
	body.sidebar-expanded .sidebar .sidebar-footer { flex-direction: row; }
	/* Estado recolhido: apenas o perfil (logout escondido) */
	body:not(.sidebar-expanded) .sidebar .sidebar-footer { flex-direction: column; }

	/* Perfil ocupa o espaço restante para que perfil+logout caibam na largura do link padrão */
	.sidebar-footer .sidebar-link { flex: 1 1 auto; width: auto; }

	/* Botão de logout ícone (tamanho uniforme) */
	.sidebar-footer .sidebar-logout-btn { width: 40px; height: 40px; padding: 0; display: inline-flex; align-items: center; justify-content: center; }

	/* No estado recolhido, esconder completamente itens extras do footer */
	body:not(.sidebar-expanded) .sidebar .sidebar-footer .collapse-hidden {
		display: none !important;
	}

	.sidebar-icon-btn {
		width: 40px;
		height: 40px;
		padding: 0;
		justify-content: center;
		gap: 0;
	}

	/* Links de ícone no footer (âncoras) — não fixar largura para permitir texto ao expandir */
	.sidebar-icon-link {
		display: inline-flex;
		align-items: center;
		justify-content: center;
	}

	/* Ícone do chevron com animação de rotação */
	.sidebar-chev { transition: transform var(--transition-short); }
	body.sidebar-expanded .sidebar-chev { transform: rotate(180deg); }

	/* Alternância de ícones de tema (moon/sun) conforme data-theme-mode */
	.theme-icon-sun { display: none; }
	[data-theme-mode="dark"] .theme-icon-sun { display: inline-block; }
	[data-theme-mode="dark"] .theme-icon-moon { display: none; }

	/* Menu do usuário (dropdown) */
	/* (Removido o dropdown; estilos mantidos intencionalmente vazios para compatibilidade futura) */
}

/* Fallback para mobile/tablet: esconder a sidebar, manter layout padrão */
@media (max-width: 1023.98px) {
	.sidebar { display: none; }
}

/* Active link indication */
.sidebar-nav a.active {
	background-color: var(--color-primary-light);
	color: var(--color-primary-dark);
	border: 1px solid color-mix(in oklab, var(--color-primary-main) 50%, var(--color-border));
}

/* =====================================
	 Form Validation States
	 ===================================== */
.is-valid {
	border-color: #10b981 !important; /* green-500 */
	background-color: color-mix(in oklab, #10b981 5%, var(--color-surface-card));
}

.is-invalid {
	border-color: var(--color-danger-border) !important;
	background-color: var(--color-danger-bg);
}

.is-valid:focus {
	outline: 2px solid #10b981;
	outline-offset: 2px;
}

.is-invalid:focus {
	outline: 2px solid var(--color-danger-border);
	outline-offset: 2px;
}

/* =====================================
	 Toast Notifications System
	 ===================================== */
#toast-container {
	position: fixed;
	top: 20px;
	right: 20px;
	z-index: var(--z-overlay);
	display: flex;
	flex-direction: column;
	gap: var(--space-3);
	max-width: 400px;
	pointer-events: none; /* Permitir cliques através do container */
}

.toast {
	display: flex;
	align-items: center;
	gap: var(--space-3);
	padding: var(--space-4);
	background-color: var(--color-surface-card);
	border: 1px solid var(--color-border);
	border-radius: var(--border-radius-medium);
	box-shadow: var(--shadow-medium);
	pointer-events: auto; /* Toast individual captura cliques */
	animation: toast-slide-in 0.3s ease-out;
	min-width: 320px;
}

@keyframes toast-slide-in {
	from {
		opacity: 0;
		transform: translateX(100%);
	}
	to {
		opacity: 1;
		transform: translateX(0);
	}
}

.toast-icon {
	font-size: 1.25rem;
	flex-shrink: 0;
}

.toast-message {
	flex: 1;
	color: var(--color-text-primary);
	font-size: 0.9375rem;
	line-height: 1.4;
}

.toast-close {
	background: transparent;
	border: none;
	color: var(--color-text-secondary);
	font-size: 1.5rem;
	line-height: 1;
	cursor: pointer;
	padding: 0;
	width: 24px;
	height: 24px;
	flex-shrink: 0;
	transition: color var(--transition-short);
}

.toast-close:hover {
	color: var(--color-text-primary);
}

/* Toast variants */
.toast-success {
	border-left: 4px solid #10b981; /* green-500 */
	background-color: color-mix(in oklab, #10b981 5%, var(--color-surface-card));
}

.toast-info {
	border-left: 4px solid var(--color-info-border);
	background-color: var(--color-info-bg);
}

.toast-warning {
	border-left: 4px solid var(--color-warning-border);
	background-color: var(--color-warning-bg);
}

.toast-error {
	border-left: 4px solid var(--color-danger-border);
	background-color: var(--color-danger-bg);
}

/* =====================================
	Regra 8 — Sistema de Loading States (Spinner + HTMX)
	Documentação: docs/LOADING_STATES.md
===================================== */

/* Spinner Animation */
@keyframes spin {
	from { transform: rotate(0deg); }
	to { transform: rotate(360deg); }
}

.spinner {
	animation: spin 0.8s linear infinite;
	will-change: transform;
	display: inline-block;
	vertical-align: middle;
}

.spinner-sm { width: 12px; height: 12px; }
.spinner-lg { width: 24px; height: 24px; }

/* HTMX Indicators (ocultos por padrão) */
.htmx-indicator {
	display: none;
	align-items: center;
	gap: var(--space-2);
}

.htmx-request .htmx-indicator,
.htmx-request.htmx-indicator {
	display: inline-flex;
}

/* Ocultar texto do botão durante loading */
.htmx-request .btn-text {
	display: none;
}

/* Loading text (opcional, para banners/overlays) */
.loading-text {
	font-size: 0.875rem;
	color: var(--color-text-secondary);
}

/* Prevenção de Clique Duplo (HTMX) */
.htmx-request,
.htmx-request * {
	pointer-events: none !important;
	cursor: wait !important;
}

/* Manter opacidade apenas no container, não nos filhos (evita overlay + opacidade dupla) */
.htmx-request {
	opacity: 0.9;
}

.htmx-request * {
	opacity: 1;
}

/* =====================================
	 Modal de Confirmação Destrutiva (Fase 1.5)
	 ===================================== */
.modal-confirm-overlay {
	position: fixed;
	inset: 0;
	z-index: var(--z-overlay);
	display: flex;
	align-items: center;
	justify-content: center;
	padding: var(--space-4);
}

.modal-confirm-backdrop {
	position: absolute;
	inset: 0;
	background-color: rgba(0, 0, 0, 0.5);
	backdrop-filter: blur(2px);
}

.modal-confirm-content {
	position: relative;
	z-index: 1;
	background-color: var(--color-surface-card);
	border: 1px solid var(--color-border);
	border-radius: var(--border-radius-medium);
	box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
	max-width: 500px;
	width: 100%;
	padding: var(--space-6);
	animation: modal-fade-in 0.2s ease-out;
}

@keyframes modal-fade-in {
	from {
		opacity: 0;
		transform: scale(0.95);
	}
	to {
		opacity: 1;
		transform: scale(1);
	}
}

.modal-confirm-title {
	margin: 0 0 var(--space-4);
	color: var(--color-text-primary);
	font-size: 1.25rem;
	font-weight: 600;
}

.modal-confirm-body {
	margin-bottom: var(--space-5);
}

.modal-confirm-body p {
	margin: 0 0 var(--space-4);
	color: var(--color-text-secondary);
	line-height: 1.6;
}

.modal-confirm-checkbox {
	display: flex;
	align-items: start;
	gap: var(--space-2);
	cursor: pointer;
	user-select: none;
}

.modal-confirm-checkbox input[type="checkbox"] {
	margin-top: 0.25rem;
	cursor: pointer;
}

.modal-confirm-checkbox span {
	color: var(--color-text-primary);
	font-weight: 500;
}

.modal-confirm-actions {
	display: flex;
	gap: var(--space-3);
	justify-content: flex-end;
}

.modal-confirm-actions .btn {
	min-width: 100px;
}

/* =====================================
	 HTMX Modal System (Fase 4+)
	 Design reutilizável para modais dinâmicos
	 ===================================== */

/* Backdrop */
.modal-backdrop {
	position: fixed;
	inset: 0;
	z-index: var(--z-overlay);
	background-color: rgba(0, 0, 0, 0.5);
	backdrop-filter: blur(2px);
}

.modal-backdrop.show {
	display: block;
}

/* Modal Container */
.modal {
	position: fixed;
	top: 0;
	left: 0;
	z-index: calc(var(--z-overlay) + 10); /* 10010 - acima do backdrop */
	width: 100%;
	height: 100%;
	overflow-x: hidden;
	overflow-y: auto;
	outline: 0;
}

.modal.show {
	display: flex !important;
	align-items: center;
	justify-content: center;
}

.modal.fade {
	opacity: 0;
	transition: opacity 0.15s linear;
}

.modal.fade.show {
	opacity: 1;
}

/* Modal Dialog (wrapper) */
.modal-dialog {
	position: relative;
	margin: 1.75rem auto;
	max-width: 500px;
	width: calc(100% - 3.5rem); /* espaçamento lateral em mobile */
	pointer-events: none;
}

.modal-dialog-lg {
	max-width: 800px;
}

.modal-dialog-xl {
	max-width: 1140px;
}

/* Centralização vertical */
.modal.show .modal-dialog {
	pointer-events: auto; /* apenas o dialog captura eventos */
}

/* Modal Content (superfície principal) */
.modal-content {
	position: relative;
	display: flex;
	flex-direction: column;
	width: 100%;
	background-color: var(--color-surface-card);
	border: 1px solid var(--color-border);
	border-radius: var(--border-radius-medium);
	box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
	outline: 0;
	animation: modal-slide-down 0.3s ease-out;
}

@keyframes modal-slide-down {
	from {
		opacity: 0;
		transform: translateY(-50px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* Modal Header */
.modal-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: var(--space-4);
	border-bottom: 1px solid var(--color-border);
}

.modal-title {
	margin: 0;
	font-size: 1.25rem;
	font-weight: 600;
	color: var(--color-text-primary);
	display: flex;
	align-items: center;
	gap: var(--space-2);
}

.modal-title svg {
	flex-shrink: 0;
}

.btn-close {
	background: transparent;
	border: none;
	font-size: 1.5rem;
	line-height: 1;
	color: var(--color-text-secondary);
	cursor: pointer;
	padding: 0;
	width: 32px;
	height: 32px;
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: var(--border-radius-medium);
	transition: background-color var(--transition-short), color var(--transition-short);
}

.btn-close:hover {
	background-color: color-mix(in oklab, var(--color-border) 40%, var(--color-surface-card));
	color: var(--color-text-primary);
}

/* Modal Body */
.modal-body {
	position: relative;
	flex: 1 1 auto;
	padding: var(--space-4);
}

/* Modal Footer */
.modal-footer {
	display: flex;
	align-items: center;
	justify-content: flex-end;
	gap: var(--space-3);
	padding: var(--space-4);
	border-top: 1px solid var(--color-border);
}

/* Form labels e inputs dentro de modais */
.modal-body .form-label {
	display: block;
	margin-bottom: var(--space-2);
	font-weight: 500;
	color: var(--color-text-primary);
}

.modal-body .form-control,
.modal-body .form-select {
	width: 100%;
	padding: 0.563rem 0.75rem;
	font-size: 0.9375rem;
	border: 1px solid var(--color-border);
	border-radius: var(--border-radius-medium);
	background-color: var(--color-surface-card);
	color: var(--color-text-primary);
	transition: border-color var(--transition-short), box-shadow var(--transition-short);
}

.modal-body .form-control:focus,
.modal-body .form-select:focus {
	outline: none;
	border-color: var(--color-border-focus);
	box-shadow: 0 0 0 3px color-mix(in oklab, var(--color-border-focus) 35%, transparent);
}

.modal-body .text-muted {
	font-size: 0.875rem;
	color: var(--color-text-secondary);
}

.modal-body .text-danger {
	color: var(--color-danger-text);
}

/* Responsividade para mobile */
@media (max-width: 576px) {
	.modal-dialog {
		margin: 0.5rem auto;
		width: calc(100% - 1rem);
	}

	.modal-dialog-lg,
	.modal-dialog-xl {
		max-width: 100%;
	}
}
