<!-- htmlhint doctype-first:false -->
{% extends "base.html" %}
{% block title %}Tema e Estética{% endblock %}

{% block styles %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/settings.css') }}?v={{ asset_v }}" />
{% endblock %}

{% block content %}
<div class="settings-container">
  {% set active_tab = 'tema' %}
  {% include "settings/_tabs.html" %}

  <div class="settings-content">
    <div class="settings-header">
      <h1>Personalização de Tema</h1>
      <p class="text-muted">Customize as cores e a aparência do sistema.</p>
    </div>

    <form method="POST" action="{{ url_for('settings_bp.tema_update') }}" class="settings-form">
      <div class="card">
        <div class="card-header"><strong>Cores do Sistema</strong></div>
        <div class="card-body">
          <div class="row g-4">
            <div class="col-12 col-md-6">
              <label for="primary_color" class="form-label">Cor Primária</label>
              <div class="input-group">
                <input type="color" class="form-control form-control-color" id="primary_color" name="primary_color" value="{{ theme.primary_color }}" title="Escolha a cor primária">
                <input type="text" class="form-control" value="{{ theme.primary_color }}" readonly>
              </div>
              <div class="form-text">Cor principal usada em botões, links e destaques.</div>
            </div>
            <div class="col-12 col-md-6">
              <label for="secondary_color" class="form-label">Cor Secundária</label>
              <div class="input-group">
                <input type="color" class="form-control form-control-color" id="secondary_color" name="secondary_color" value="{{ theme.secondary_color }}" title="Escolha a cor secundária">
                <input type="text" class="form-control" value="{{ theme.secondary_color }}" readonly>
              </div>
              <div class="form-text">Cor usada em elementos secundários e fundos.</div>
            </div>
          </div>
        </div>
      </div>

      <div class="card mt-4">
        <div class="card-header"><strong>Preferências de Cor na Agenda</strong></div>
        <div class="card-body">
          <div class="form-check form-switch">
            <input class="form-check-input" type="checkbox" role="switch" id="use_system_color" name="use_system_color" {% if theme.use_system_color %}checked{% endif %}>
            <label class="form-check-label" for="use_system_color">
              Usar cor global do sistema na agenda
            </label>
          </div>
          <div class="form-text mt-2">
            Quando ativado, a agenda usará a cor primária do sistema. Quando desativado, cada profissional usa sua cor personalizada (definida em Preferências de Usuário).
          </div>
        </div>
      </div>

      <div class="mt-4">
        <button type="submit" class="btn btn-primary">Salvar Tema</button>
        <button type="reset" class="btn btn-outline-secondary">Restaurar</button>
      </div>
    </form>
  </div>
</div>

{% block scripts %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/color_sync.js') }}?v={{ asset_v }}" defer></script>
{% endblock %}
{% endblock %}
